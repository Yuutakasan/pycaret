# 🏪 店舗別包括ダッシュボード v3.0 - 使用方法

## 📋 目次

1. [概要](#概要)
2. [セットアップ](#セットアップ)
3. [基本的な使い方](#基本的な使い方)
4. [機能詳細](#機能詳細)
5. [活用シーン](#活用シーン)
6. [トラブルシューティング](#トラブルシューティング)

---

## 概要

### 📊 このダッシュボードでできること

店舗マネージャーが**このダッシュボード1つで店舗の全てを理解**できるように設計されています。

#### ✅ 主要機能
- **店舗選択**: 3店舗を切り替えて比較分析
- **時間軸切替**: 月次・週次・日次で売上を分析
- **商品ABC分析**: 重要商品を特定・死に筋商品を発見
- **ドリルダウン探索**: グラフをクリックして詳細データを確認
- **フィルタ・検索**: 商品名・ABCランクで絞込
- **自動アラート**: 対応が必要な項目を自動検出

#### 📈 分析内容
1. **KPIサマリー** - 総売上・日商平均・商品数
2. **時系列分析** - 売上推移・トレンド
3. **商品ABC分析** - パレート図・重要商品特定
4. **曜日パターン** - 曜日別の売上傾向
5. **自動アラート** - 死に筋商品・機会ロス検出

---

## セットアップ

### 📦 必要なライブラリ

```bash
# 基本ライブラリ
pip install pandas numpy

# 可視化
pip install matplotlib seaborn plotly

# 統計・機械学習
pip install scipy scikit-learn

# Jupyter Notebook用（インタラクティブ機能）
pip install ipywidgets
jupyter nbextension enable --py widgetsnbextension

# 日本語フォント（推奨）
pip install japanize-matplotlib
```

### 📁 データ配置

```
/mnt/d/github/pycaret/work/
├── 店舗別包括ダッシュボード_v3_interactive.ipynb  ← このファイルを使用
├── output/
│   └── 06_final_enriched_20250701_20250930.csv  ← データファイル
└── docs/
    └── ダッシュボード使用方法.md  ← このドキュメント
```

### 🚀 起動方法

```bash
# 1. 作業ディレクトリに移動
cd /mnt/d/github/pycaret/work

# 2. Jupyter Notebook起動
jupyter notebook

# 3. ブラウザで開く
# → 店舗別包括ダッシュボード_v3_interactive.ipynb を開く

# 4. すべてのセルを実行
# Kernel → Restart & Run All
```

---

## 基本的な使い方

### 🎮 Step 1: コントロールパネルの操作

ノートブックを実行すると、以下のコントロールパネルが表示されます:

```
🎮 コントロールパネル
┌─────────────────────────────────────┐
│ 📍 店舗: [58738:ＴＸ秋葉原駅 ▼]     │  📅 時間軸: [日次 ▼]
│ 🔢 表示件数: [20 ▼]                 │  📊 ABCランク: [全て ▼]
│ 🔍 検索: [商品名で検索_________]    │  🔄 データ更新
└─────────────────────────────────────┘
```

#### 各コントロールの説明

| コントロール | 説明 | 選択肢 |
|------------|------|--------|
| 📍 **店舗** | 分析対象の店舗を選択 | 秋葉原駅・つくば駅・六町駅 |
| 📅 **時間軸** | 分析の時間粒度を選択 | 日次・週次・月次 |
| 🔢 **表示件数** | テーブルの表示行数 | 10・20・50・100件 |
| 📊 **ABCランク** | 商品のABC分類で絞込 | 全て・A・B・C |
| 🔍 **検索** | 商品名で部分一致検索 | (任意のテキスト) |
| 🔄 **データ更新** | 選択した条件で分析実行 | (ボタン) |

### 🎯 Step 2: 分析実行

1. **店舗を選択**: 例) 「58738:ＴＸ秋葉原駅」
2. **時間軸を選択**: 例) 「日次」
3. **条件を設定**: 必要に応じてフィルタ・検索を設定
4. **「🔄 データ更新」ボタンをクリック**
5. **結果を確認**: 下にスクロールして分析結果を確認

### 📊 Step 3: 結果の見方

#### Section 1: KPIサマリー
```
💰 総売上高: ¥12,345,678
📊 日商平均: ¥134,398/日
📦 総販売数: 45,678個
💵 平均単価: ¥270/個
🏪 商品数: 1,234品
```

**活用ポイント**:
- 日商平均が目標を達成しているか確認
- 前週・前月と比較して変化を把握

#### Section 2: 売上推移（時系列）
- **グラフの使い方**:
  - マウスオーバー: 詳細データを表示
  - ドラッグ: ズームイン
  - ダブルクリック: ズームリセット
  - 凡例クリック: ライン表示/非表示切替

**活用ポイント**:
- トレンドを確認（上昇・下降・横ばい）
- 異常値（急激な変化）を発見
- 時間軸を変更して異なる視点で確認

#### Section 3: 商品ABC分析

**パレート図の見方**:
```
左側の急上昇部分 → A商品（最重要）
80%ライン → A/B境界
右側の平坦部分 → C商品（在庫削減候補）
```

**活用ポイント**:
- **A商品**: 欠品させないよう重点管理
- **C商品**: 在庫削減・廃番検討
- 検索機能で特定商品を確認

#### Section 4: 曜日パターン

**指数の見方**:
```
指数 > 100 → 平日より売れる（発注増）
指数 < 100 → 平日より売れない（発注減）
```

**活用ポイント**:
- 曜日別の発注量調整
- 週末の売上ピークに備える

#### Section 5: 自動アラート

```
⚠️ 死に筋商品: 25商品 → 在庫削減・廃番検討
🚨 機会ロス商品: 8商品 → 発注量増加・欠品対策
```

**活用ポイント**:
- 死に筋商品リストを確認して在庫削減
- 機会ロス商品の発注を強化

---

## 機能詳細

### 🎯 店舗選択機能

#### できること
- 3店舗間で瞬時に切替
- 店舗ごとの特徴を比較
- 好業績店舗のベストプラクティスを発見

#### 使用シーン
```
例1: 秋葉原駅の売上が好調
→ つくば駅・六町駅と比較
→ 成功要因を分析・他店に展開

例2: 六町駅の特定商品が低調
→ 秋葉原駅・つくば駅の同商品を確認
→ 店舗特性の違いを理解
```

### 📅 時間軸切替機能

#### 日次分析
- **用途**: 短期トレンド把握・日々の変動確認
- **活用**: 曜日パターン・イベント影響分析

#### 週次分析
- **用途**: 中期トレンド把握・季節変動確認
- **活用**: 週単位の売上目標管理

#### 月次分析
- **用途**: 長期トレンド把握・前年比較
- **活用**: 月次レポート作成・経営判断

### 🔍 フィルタ・検索機能

#### ABCランクフィルタ

| フィルタ | 対象商品 | 活用シーン |
|---------|---------|-----------|
| **A** | 売上上位80%を占める重要商品 | 欠品対策・重点管理 |
| **B** | 売上80-95%を占める準重要商品 | バランス管理 |
| **C** | 売上95-100%の低貢献商品 | 在庫削減・廃番検討 |

#### 検索機能

```
使用例1: 「コーヒー」で検索
→ コーヒー関連商品のみ表示
→ カテゴリ全体の状況を把握

使用例2: 「限定」で検索
→ 限定商品のパフォーマンス確認
→ 次回仕入れの判断材料
```

### 📊 ドリルダウン機能

#### パレート図でのドリルダウン
1. **バーにマウスオーバー**
   ```
   商品名: 〇〇〇
   売上: ¥123,456
   数量: 456個
   ランク: A
   ```

2. **詳細データを確認**
   - 売上金額
   - 販売数量
   - ABCランク
   - 平均単価

3. **次のアクション決定**
   - A商品 → 発注強化
   - C商品 → 在庫削減

---

## 活用シーン

### 🌅 毎朝の業務開始時

```
1. ダッシュボードを開く
2. 前日の売上を確認（日次・秋葉原駅）
3. 自動アラートを確認
4. 優先対応項目をToDoリストに追加
```

**所要時間**: 5分

### 📊 週次ミーティング前

```
1. 時間軸を「週次」に変更
2. 全店舗の推移を確認
3. 好調/不調な商品を特定
4. パレート図をスクリーンショット
5. ミーティング資料に添付
```

**所要時間**: 10分

### 📝 月次レポート作成時

```
1. 時間軸を「月次」に変更
2. 全店舗の月次推移を確認
3. 前月比を計算
4. KPIサマリーをコピー
5. レポートに貼り付け
```

**所要時間**: 15分

### 🛒 発注業務時

```
1. ABCランクフィルタで「A」を選択
2. A商品の販売日数を確認
3. 販売日数が少ない商品 → 欠品リスク → 発注量増
4. 曜日パターンを確認
5. 曜日別調整係数を発注に反映
```

**所要時間**: 20分

### 🗑️ 在庫削減時

```
1. 自動アラートの「死に筋商品」を確認
2. ABCランクフィルタで「C」を選択
3. 販売日数・1日平均売上を確認
4. 売上が極端に低い商品をリストアップ
5. 現在の在庫を確認して廃番を検討
```

**所要時間**: 15分

---

## トラブルシューティング

### ❌ ウィジェットが表示されない

**原因**: ipywidgetsが未インストールまたは未有効化

**解決方法**:
```bash
# インストール
pip install ipywidgets

# 有効化
jupyter nbextension enable --py widgetsnbextension

# Jupyter再起動
jupyter notebook stop
jupyter notebook
```

### ❌ 日本語が文字化けする

**原因**: 日本語フォント未設定

**解決方法**:
```bash
# japanize-matplotlibインストール
pip install japanize-matplotlib

# ノートブック再実行
# Kernel → Restart & Run All
```

### ❌ データが表示されない

**原因1**: CSVファイルのパスが間違っている

**解決方法**:
```python
# セル2のDATA_PATHを確認・修正
DATA_PATH = 'output/06_final_enriched_20250701_20250930.csv'
```

**原因2**: CSVファイルのエンコーディングが違う

**解決方法**:
```python
# エンコーディングを変更
df_all = pd.read_csv(DATA_PATH, encoding='utf-8')  # または 'shift-jis'
```

### ❌ 「🔄 データ更新」ボタンを押しても何も起きない

**原因**: Kernel → Restart & Run Allを実行していない

**解決方法**:
```
1. Kernelメニューをクリック
2. "Restart & Run All"を選択
3. すべてのセルが実行されるまで待つ
4. 「🔄 データ更新」ボタンを再度クリック
```

### ❌ グラフが表示されない

**原因**: Plotlyが未インストール

**解決方法**:
```bash
pip install plotly

# ノートブック再実行
```

### ❌ メモリエラーが発生する

**原因**: データサイズが大きすぎる

**解決方法**:
```python
# データを期間で絞り込む
df_all = df_all[df_all['日付'] >= '2025-09-01']

# または表示件数を減らす
count_selector.value = 10  # 20 → 10に変更
```

---

## 📚 関連ドキュメント

- **Stage1_現状把握分析.ipynb** - 時系列分析の詳細
- **Stage2_商品ABC分析.ipynb** - ABC分析の理論
- **Stage3_発注最適化分析.ipynb** - 安全在庫・発注点の計算方法
- **Stage4_外部要因分析.ipynb** - 気温・天気の影響分析
- **Stage5_PyCaret需要予測.ipynb** - 機械学習による需要予測

---

## 💡 ベストプラクティス

### 📈 効果的な活用方法

1. **毎日必ず確認**
   - 朝一番でダッシュボードを開く習慣をつける
   - 自動アラートを最優先で確認

2. **時間軸を使い分ける**
   - 日次: 日々の変動確認
   - 週次: 中期トレンド把握
   - 月次: 経営判断・レポート作成

3. **店舗間で比較する**
   - 好業績店舗の成功要因を分析
   - 低業績店舗の改善ポイントを発見

4. **ABCランクを意識する**
   - A商品: 絶対に欠品させない
   - B商品: 適正在庫を維持
   - C商品: 在庫削減・廃番検討

5. **データに基づいて意思決定**
   - 感覚ではなくデータで判断
   - 仮説を立ててダッシュボードで検証

### 🎯 KPI管理のコツ

| KPI | 目標値例 | チェック頻度 |
|-----|---------|------------|
| 日商 | 前週比±5%以内 | 毎日 |
| A商品欠品率 | 5%以下 | 毎日 |
| C商品比率 | 全体の5%以下 | 週次 |
| 在庫回転率 | 月4回以上 | 月次 |
| 売上前年比 | +5%以上 | 月次 |

---

## 🔄 アップデート履歴

### v3.0 (2025-10-08)
- ✅ 店舗選択機能追加
- ✅ 時間軸切替機能追加（日次・週次・月次）
- ✅ 高度なドリルダウン機能
- ✅ 包括的なフィルタ・検索機能
- ✅ ワンクリック更新ボタン

### v2.0
- ✅ ABC分析追加
- ✅ 自動アラート機能
- ✅ パレート図追加

### v1.0
- ✅ 基本的な時系列分析
- ✅ KPIサマリー

---

## 📞 サポート

質問・不具合報告:
- **GitHub Issues**: https://github.com/pycaret/pycaret/issues
- **ドキュメント**: /mnt/d/github/pycaret/work/docs/

---

**最終更新**: 2025-10-08
**バージョン**: 3.0
**作成者**: Claude Code with claude-flow orchestration
